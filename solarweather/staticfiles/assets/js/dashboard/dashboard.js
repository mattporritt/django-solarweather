// @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
"use strict";import{setup}from"./controls.js";let Chart;const renderGraph=e=>{const t={type:"line",data:{labels:["January","February","March","April","May","June"],datasets:[{label:"My First dataset",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:[0,10,5,2,20,30,45]}]}},o=new Chart(document.getElementById(e),t);window.console.log(o)},updateDashboard=e=>{const t=document.getElementById("dashboard-indoor-temp-card"),o=t.querySelector(".loading-spinner"),r=t.querySelector(".overlay"),a=t.querySelectorAll(".blur"),n=document.getElementById("indoor-temp-now"),d=document.getElementById("indoor-temp-now-feels-like"),l=document.getElementById("indoor-temp-day-min"),m=document.getElementById("indoor-temp-day-max"),i=document.getElementById("outdoor-temp-now"),s=document.getElementById("outdoor-temp-now-feels-like"),p=document.getElementById("outdoor-temp-day-min"),u=document.getElementById("outdoor-temp-day-max"),y=e.indoor_temp.latest?e.indoor_temp.latest:0,c=e.indoor_feels_temp.latest?e.indoor_temp.latest:0,b=e.outdoor_temp.latest?e.outdoor_temp.latest:0,_=e.outdoor_feels_temp.latest?e.outdoor_feels_temp.latest:0;n.innerHTML=Number.parseFloat(y).toFixed(1),d.innerHTML=Number.parseFloat(c).toFixed(1),l.innerHTML=Number.parseFloat(e.indoor_temp.daily_min).toFixed(1),m.innerHTML=Number.parseFloat(e.indoor_temp.daily_max).toFixed(1),i.innerHTML=Number.parseFloat(b).toFixed(1),s.innerHTML=Number.parseFloat(_).toFixed(1),p.innerHTML=Number.parseFloat(e.outdoor_temp.daily_min).toFixed(1),u.innerHTML=Number.parseFloat(e.outdoor_temp.daily_max).toFixed(1),renderGraph("indoor-temp-chart"),o.style.display="none",r.style.display="none",a.forEach((e=>{e.classList.remove("blur")}))},getData=()=>{fetch("/dataajax/").then((e=>e.json())).then((e=>updateDashboard(e)))};export const init=e=>{Chart=e,setup(getData),getData()};