// @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
"use strict";import{setup}from"./controls.js";const updateDashboard=e=>{const t=document.getElementById("dashboard-current-usage-card"),r=t.querySelector(".loading-spinner"),o=t.querySelector(".overlay"),n=t.querySelectorAll(".blur"),a=document.getElementById("dashboard-daily-power-card"),l=a.querySelector(".loading-spinner"),d=a.querySelector(".overlay"),s=a.querySelectorAll(".blur"),i=document.getElementById("dashboard-light-card"),u=i.querySelector(".loading-spinner"),c=i.querySelector(".overlay"),m=i.querySelectorAll(".blur"),p=document.getElementById("current-usage-now"),y=document.getElementById("current-usage-from-solar"),g=document.getElementById("current-usage-from-grid"),_=document.getElementById("generated-day"),w=document.getElementById("generated-week"),b=document.getElementById("generated-month"),h=document.getElementById("used-day"),F=document.getElementById("used-week"),v=document.getElementById("used-month"),E=document.getElementById("uv-index"),x=document.getElementById("light-intensity"),B=e.power_consumption.latest?e.power_consumption.latest:0,I=e.inverter_ac_power.latest?e.inverter_ac_power.latest:0,L=e.grid_power_usage_real.latest?e.grid_power_usage_real.latest:0,H=e.inverter_ac_power.day?e.inverter_ac_power.day:0,M=e.inverter_ac_power.week?e.inverter_ac_power.week:0,T=e.inverter_ac_power.month?e.inverter_ac_power.month:0,q=e.power_consumption.day?e.power_consumption.day:0,N=e.power_consumption.week?e.power_consumption.week:0,S=e.power_consumption.month?e.power_consumption.month:0,f=e.uv_index.latest?e.uv_index.latest:0,k=e.solar_radiation.latest?e.solar_radiation.latest:0,D=Number.parseFloat(B)/1e3,j=Number.parseFloat(I)/1e3,A=Number.parseFloat(L)/1e3,z=Number.parseFloat(H)/1e3,C=Number.parseFloat(M)/1e3,G=Number.parseFloat(T)/1e3,J=Number.parseFloat(q)/1e3,K=Number.parseFloat(N)/1e3,O=Number.parseFloat(S)/1e3;p.innerHTML=D.toFixed(3),y.innerHTML=j.toFixed(3),g.innerHTML=A.toFixed(3),_.innerHTML=z.toFixed(3),w.innerHTML=C.toFixed(1),b.innerHTML=G.toFixed(1),h.innerHTML=J.toFixed(3),F.innerHTML=K.toFixed(1),v.innerHTML=O.toFixed(1),E.innerHTML=f,x.innerHTML=k.toFixed(3),r.style.display="none",o.style.display="none",n.forEach((e=>{e.classList.remove("blur")})),l.style.display="none",d.style.display="none",s.forEach((e=>{e.classList.remove("blur")})),u.style.display="none",c.style.display="none",m.forEach((e=>{e.classList.remove("blur")}))},getData=()=>{fetch("/dataajax/?dashboard=solar").then((e=>e.json())).then((e=>updateDashboard(e)))};export const init=()=>{setup(getData),getData()};